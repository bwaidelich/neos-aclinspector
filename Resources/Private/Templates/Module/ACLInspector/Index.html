<style>
    .icon-green { color: green; }
    .icon-red { color: red; }
    .icon-nodeCheck { margin: 0 10px !important; }
</style>

<div class="neos-content neos-container-fluid">
    <f:form action="index" object="{dto}" name="dto">
        <div class="neos-row-fluid">
            <fieldset class="neos-span6">
                <legend>Show nodes</legend>
                <div class="neos-control-group">
                    <label class="neos-control-label" for="startPath">Start on path:</label>
                    <div class="neos-controls neos-controls-row">
                        <f:form.textfield property="startOnNodePath" id="startPath" style="width: 100%;"
                                          placeholder="/sites/"/>
                    </div>
                </div>
                <div class="neos-control-group">
                    <label class="neos-control-label" for="endPath">End on path:</label>
                    <div class="neos-controls neos-controls-row">
                        <f:form.textfield property="stopOnNodePath" id="endPath" style="width: 100%;"
                                          placeholder="/sites/site/"/>
                    </div>
                </div>
                <button class="neos-button neos-button-success neos-pull-right">Check ACL</button>
            </fieldset>
            <fieldset class="neos-span6">
                <legend>Check for Roles</legend>
                <f:for each="{roles}" as="role" iteration="it">
                    <div class="neos-controls">
                        <label for="roles-{it.cycle}" class="neos-checkbox">
                            <f:form.textfield id="roles-{it.cycle}" type="checkbox" property="roles.{it.cycle}"
                                              value="{role.identifier}"/>
                            <span></span>
                            {role.name} <span class="neos-help-inline">({role.identifier})</span>
                        </label>
                    </div>
                </f:for>
            </fieldset>
        </div>
    </f:form>
</div>

<legend>Access Control List</legend>
<div class="neos-content neos-container-fluid">

    <table class="neos-table">
        <thead>
        <tr>
            <th>Path</th>
            <th>Nodetype</th>
            <th>
                <i class="icon-nodeCheck icon-white icon-plus"></i>
                <i class="icon-nodeCheck icon-white icon-pencil"></i>
                <i class="icon-nodeCheck icon-white icon-times"></i>
                <i class="icon-nodeCheck icon-white icon-sitemap"></i></th>
        </tr>
        </thead>
        <tbody>

        <f:for each="{nodes}" as="checkedNode">
            <tr>
                <td><span>{checkedNode.node.path}</span></td>
                <td><span class="neos-label">{checkedNode.node.nodeType}</span></td>

                <td colspan="4">
                    <f:for each="{checkedNode.acl}" as="checks" key="roleIdentifier">
                        <f:render section="icon" arguments="{value: checks.createNodeOfType}"/>
                        <f:render section="icon" arguments="{value: checks.editNode}"/>
                        <f:render section="icon" arguments="{value: checks.removeNode}"/>
                        <f:render section="icon" arguments="{value: checks.showInTree}"/>

                        <span class="neos-label">{roleIdentifier}</span>
                        <br/>
                    </f:for>
                </td>

            </tr>
        </f:for>
        </tbody>
    </table>

</div>

<f:section name="icon">
    <f:if condition="{value}">
        <f:then>
            <i class="icon-nodeCheck icon-green icon-check"></i>
        </f:then>
        <f:else>
            <i class="icon-nodeCheck icon-red icon-times"></i>
        </f:else>
    </f:if>
</f:section>